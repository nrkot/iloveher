<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üé∂ Listen Together</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.min.js"></script>
    <link rel="icon" type="image/png" href="static\main-logo.png">
    <style>
        body {
            font-family: sans-serif;
            background: #1e1e2f;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .player {
            background: #2e2e40;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.1);
            text-align: center;
        }
        audio {
            width: 100%;
        }
        button {
            margin-top: 15px;
            padding: 10px 20px;
            border: none;
            background: #ff55bb;
            color: white;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="player">
        <h2>üéµ –°–ª—É—à–∞–µ–º –≤–º–µ—Å—Ç–µ üéµ</h2>
<select id="songSelect">
    <option value="static/–í–∏–∫—Ç–æ—Ä –¶–æ–π - –ó–≤–µ–∑–¥–∞ –ø–æ –∏–º–µ–Ω–∏ –°–æ–ª–Ω—Ü–µ.mp3">–í–∏–∫—Ç–æ—Ä –¶–æ–π - –ó–≤–µ–∑–¥–∞ –ø–æ –∏–º–µ–Ω–∏ –°–æ–ª–Ω—Ü–µ</option>
    <option value="static/–ì–¥–µ –§–∞–Ω—Ç–æ–º - –Ø —Ç–µ–±—è –ª—é–±–ª—é.mp3">–ì–¥–µ –§–∞–Ω—Ç–æ–º - –Ø —Ç–µ–±—è –ª—é–±–ª—é</option>
    <option value="static/–î–∞–π—Ç–µ –¢–∞–Ω–∫ (!) - –£—Ç—Ä–æ.mp3">–î–∞–π—Ç–µ –¢–∞–Ω–∫ (!) - –£—Ç—Ä–æ</option>
    <option value="static/–ú–æ–ª—á–∞—Ç –î–æ–º–∞ - –°—É–¥–Ω–æ (–ë–æ—Ä–∏—Å –†—ã–∂–∏–π).mp3">–ú–æ–ª—á–∞—Ç –î–æ–º–∞ - –°—É–¥–Ω–æ</option>
    <option value="static/–ù–µ–∫—Å—é—à–∞ - –õ—é–±–≤–∏ –≤—Å–µ –≤–æ–∑—Ä–∞—Å—Ç—ã –ø–æ–∫–æ—Ä–Ω—ã.mp3">–ù–µ–∫—Å—é—à–∞ - –õ—é–±–≤–∏ –≤—Å–µ –≤–æ–∑—Ä–∞—Å—Ç—ã –ø–æ–∫–æ—Ä–Ω—ã</option>
    <option value="static/–ü–æ—à–ª–∞—è –ú–æ–ª–ª–∏ - –ë—É–¥—É —Ç–≤–æ–∏–º –ø–µ—Å–∏–∫–æ–º.mp3">–ü–æ—à–ª–∞—è –ú–æ–ª–ª–∏ - –ë—É–¥—É —Ç–≤–æ–∏–º –ø–µ—Å–∏–∫–æ–º</option>
    <option value="static/–ü–æ—à–ª–∞—è –ú–æ–ª–ª–∏ - –•–∞–Ω–Ω–∞–º–æ–Ω—Ç–∞–Ω–∞.mp3">–ü–æ—à–ª–∞—è –ú–æ–ª–ª–∏ - –•–∞–Ω–Ω–∞–º–æ–Ω—Ç–∞–Ω–∞</option>
    <option value="static/–©–ï–ù–ö–ò - –ì—Ä—è–∑—å.mp3">–©–ï–ù–ö–ò - –ì—Ä—è–∑—å</option>
    <option value="static/–≠–ª–¥–∂–µ–π - California.mp3">–≠–ª–¥–∂–µ–π - California</option>
    <option value="static/A2M - I Got Bitches.mp3">A2M - I Got Bitches</option>
    <option value="static/Anacondaz & –∫–∏—Å-–∫–∏—Å - –°—è–¥—å –º–Ω–µ –Ω–∞ –ª–∏—Ü–æ.mp3">Anacondaz & –∫–∏—Å-–∫–∏—Å - –°—è–¥—å –º–Ω–µ –Ω–∞ –ª–∏—Ü–æ</option>
    <option value="static/Arash - One Day (feat. Helena, Robert Uhlmann).mp3">Arash - One Day</option>
    <option value="static/Austin Mahone feat. Pitbull - Mmm Yeah.mp3">Austin Mahone feat. Pitbull - Mmm Yeah</option>
    <option value="static/Basshunter - DotA.mp3">Basshunter - DotA</option>
    <option value="static/CUPSIZE - –Æ—Ä–∞, –Æ—Ä–∞.mp3">CUPSIZE - –Æ—Ä–∞, –Æ—Ä–∞</option>
    <option value="static/Face - –õ–ê–ë–ò–†–ò–ù–¢.mp3">Face - –õ–ê–ë–ò–†–ò–ù–¢</option>
    <option value="static/GSPD_-_Geroinovyjj_SHik_speed_up_77962848.mp3">GSPD - –ì–µ—Ä–æ–π–Ω–æ–≤—ã–π —à–∏–∫ (speed up)</option>
    <option value="static/Kohlr√ºbenwinter - Fahrradsattel.mp3">Kohlr√ºbenwinter - Fahrradsattel</option>
    <option value="static/Ksb Muzic –ù–æ –Ø –¢–æ –ñ–µ.mp3">Ksb Muzic - –ù–æ –Ø –¢–æ –ñ–µ</option>
    <option value="static/Le Tigre - Deceptacon.mp3">Le Tigre - Deceptacon</option>
    <option value="static/Lizer - –ü–∞—á–∫–∞ —Å–∏–≥–∞—Ä–µ—Ç.mp3">Lizer - –ü–∞—á–∫–∞ —Å–∏–≥–∞—Ä–µ—Ç</option>
    <option value="static/Miss Construction Hass Und Liebe.mp3">Miss Construction - Hass Und Liebe</option>
    <option value="static/Nirvana - Come As You Are .mp3">Nirvana - Come As You Are</option>
    <option value="static/poshlaya-molli-pornhab-krismas-klab.mp3">–ü–æ—à–ª–∞—è –ú–æ–ª–ª–∏ - Pornhab Krismas Klab</option>
    <option value="static/Post Malone feat. Swae Lee - Sunflower.mp3">Post Malone feat. Swae Lee - Sunflower</option>
    <option value="static/sindrom-vosmiklassnika-idi-nakhujj.mp3">–°–∏–Ω–¥—Ä–æ–º –≤–æ—Å—å–º–∏–∫–ª–∞—Å—Å–Ω–∏–∫–∞ - –ò–¥–∏ –Ω–∞—Ö—É–π</option>
    <option value="static/sindrom-vosmiklassnika-nikotin.mp3">–°–∏–Ω–¥—Ä–æ–º –≤–æ—Å—å–º–∏–∫–ª–∞—Å—Å–Ω–∏–∫–∞ - –ù–∏–∫–æ—Ç–∏–Ω</option>
    <option value="static/Stephanie Mabey - The Zombie Song.mp3">Stephanie Mabey - The Zombie Song</option>
    <option value="static/Tokio Hotel - Feel It All.mp3">Tokio Hotel - Feel It All</option>
    <option value="static/Tokio Hotel - Ich Bin Nicht Ich.mp3">Tokio Hotel - Ich Bin Nicht Ich</option>
</select><br><br>
        <audio id="audio" controls>
            <source src="static/–í–∏–∫—Ç–æ—Ä –¶–æ–π - –ó–≤–µ–∑–¥–∞ –ø–æ –∏–º–µ–Ω–∏ –°–æ–ª–Ω—Ü–µ.mp3" type="audio/mp3">
        </audio><br>
        <button id="playBtn">‚ñ∂Ô∏è Play</button>
        <button id="pauseBtn">‚è∏ Pause</button>
    </div>

    <script>
        const socket = io();
        const audio = document.getElementById("audio");
        const playBtn = document.getElementById("playBtn");
        const pauseBtn = document.getElementById("pauseBtn");
        const songSelect = document.getElementById("songSelect");

        // üîä –í—ã–±–æ—Ä –ø–µ—Å–Ω–∏ –¥–µ–≤—É—à–∫–æ–π
        songSelect.onchange = () => {
            const selected = songSelect.value;
            socket.emit('change_song', selected);
            audio.src = selected;
            audio.load();
            audio.play();
        };

        // ‚ñ∂Ô∏è Play
        playBtn.onclick = () => {
            socket.emit('play');
            audio.play();
        };

        // ‚è∏ Pause
        pauseBtn.onclick = () => {
            socket.emit('pause');
            audio.pause();
        };

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
        audio.ontimeupdate = () => {
            socket.emit('sync', { time: audio.currentTime });
        };

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
        socket.on('play', () => audio.play());
        socket.on('pause', () => audio.pause());

        socket.on('sync', data => {
            if (Math.abs(audio.currentTime - data.time) > 1) {
                audio.currentTime = data.time;
            }
        });

        // üì° –ö–æ–≥–¥–∞ –¥—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–µ—Å–Ω—é
        socket.on('change_song', songPath => {
            audio.src = songPath;
            audio.load();
            audio.play();
            songSelect.value = songPath; // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞
        });
    </script>
    </script>
</body>
</html>
